---
import { getLocale } from "astro-i18n-aut";

const locale = getLocale(Astro.url);
---

<div client:load class="language-switcher">
	<button onclick="switchLanguage('es')" class={`lang-btn ${locale === 'es' ? 'active' : ''}`}>ES</button>
	<span>|</span>
	<button onclick="switchLanguage('en')" class={`lang-btn ${locale === 'en' ? 'active' : ''}`}>EN</button>
</div>

<script>
	function switchLanguage(lang: string) {
		const currentPath = window.location.pathname;
		const newPath = lang === 'es' ? currentPath.replace(/^\/en/, '') || '/' : `/en${currentPath}`;
		window.location.href = newPath;
	}
</script>

<style>
	.language-switcher {
		display: flex;
		gap: 0.5rem;
		align-items: center;
	}

	.lang-btn {
		background: transparent;
		border: 1px solid var(--accent-color);
		color: var(--accent-color);
		padding: 0.5rem 1rem;
		border-radius: 20px;
		cursor: pointer;
		font-weight: 500;
		transition: all 0.3s;
	}

	.lang-btn:hover {
		background: var(--accent-color);
		color: white;
	}

	.lang-btn.active {
		background: var(--accent-color);
		color: white;
	}
</style>
